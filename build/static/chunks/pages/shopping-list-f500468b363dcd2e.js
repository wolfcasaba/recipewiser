(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{9463:e=>{let t=new Proxy({},{get:(e,t)=>{if("__esModule"===t)return{};throw Error(`You're trying to import \`@heroicons/react/solid/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}});e.exports=t},9784:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/shopping-list",function(){return i(7403)}])},7403:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var s=i(4848),n=i(6540);let r=e=>{let t;let i=new Set,s=(e,s)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=s?s:"object"!=typeof n||null===n)?n:Object.assign({},t,n),i.forEach(i=>i(t,e))}},n=()=>t,r={setState:s,getState:n,getInitialState:()=>a,subscribe:e=>(i.add(e),()=>i.delete(e))},a=t=e(s,n,r);return r},a=e=>e?r(e):r,l=e=>e,o=e=>{let t=a(e),i=e=>(function(e,t=l){let i=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(i),i})(t,e);return Object.assign(i,t),i},c=(e=>e?o(e):o)(e=>({items:[],addRecipeToList:t=>e(e=>{let i=[...e.items];return t.ingredients.forEach(e=>{let{name:t,quantity:s}=e,n=i.find(e=>e.name===t);n?n.quantity+=" + ".concat(s):i.push({name:t,quantity:s})}),{items:i}}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.name!==t)})),clearList:()=>e({items:[]})}));var d=i(9463);function u(){let{items:e,removeItem:t,clearList:i}=c(),[r,a]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),u=async()=>{let t=await fetch("/api/shopping-list/optimize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})});a((await t.json()).optimizedList)},h=async t=>{if(0===e.length){alert("Your shopping list is empty!");return}o(!0);let i=await fetch("/api/shopping-list/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e,service:t})}),s=await i.json();o(!1),s.orderUrl?window.location.href=s.orderUrl:alert("Failed to place order. Try again later.")};return(0,s.jsxs)("div",{className:"p-6 max-w-lg mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\uD83D\uDED2 Grocery Shopping List"}),0===e.length?(0,s.jsx)("p",{children:"Your shopping list is empty."}):(0,s.jsx)("ul",{className:"space-y-2",children:e.map((e,i)=>(0,s.jsxs)("li",{className:"flex justify-between p-2 bg-gray-100 rounded",children:[e.name,": ",e.quantity,(0,s.jsx)("button",{onClick:()=>t(e.name),className:"text-red-500",children:(0,s.jsx)(d.TrashIcon,{className:"w-5 h-5"})})]},i))}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>h("instacart"),className:"mt-4 bg-green-500 text-white px-4 py-2 rounded",children:"Order with Instacart"}),(0,s.jsx)("button",{onClick:()=>h("amazon"),className:"mt-4 bg-yellow-500 text-white px-4 py-2 rounded",children:"Order with Amazon Fresh"}),(0,s.jsx)("button",{onClick:i,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded",children:"Clear List"})]}),e.length>0&&(0,s.jsx)("button",{onClick:u,className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded",children:"Optimize List with AI"}),r&&(0,s.jsxs)("p",{className:"mt-4",children:["Optimized List: ",r]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(9784)),_N_E=e.O()}]);